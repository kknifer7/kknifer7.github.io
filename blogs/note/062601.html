<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>Java多线程基础 | KnifeR 博客站</title><meta name="description" content="Just playing around">
    <link rel="modulepreload" href="/assets/app-46763c8b.js"><link rel="modulepreload" href="/assets/framework-4bf64526.js"><link rel="modulepreload" href="/assets/062601.html-05a963eb.js"><link rel="modulepreload" href="/assets/062601.html-1b7f22a5.js"><link rel="prefetch" href="/assets/index.html-6d5e9dd3.js" as="script"><link rel="prefetch" href="/assets/index.html-8c2edf06.js" as="script"><link rel="prefetch" href="/assets/index.html-aa7102b1.js" as="script"><link rel="prefetch" href="/assets/index.html-d7f4136c.js" as="script"><link rel="prefetch" href="/assets/index.html-4519aed8.js" as="script"><link rel="prefetch" href="/assets/index.html-e901a9ed.js" as="script"><link rel="prefetch" href="/assets/index.html-c65d32c4.js" as="script"><link rel="prefetch" href="/assets/index.html-27a6bd06.js" as="script"><link rel="prefetch" href="/assets/index.html-e0c89bb6.js" as="script"><link rel="prefetch" href="/assets/index.html-5b18d14f.js" as="script"><link rel="prefetch" href="/assets/index.html-6cf06f14.js" as="script"><link rel="prefetch" href="/assets/index.html-cab3f600.js" as="script"><link rel="prefetch" href="/assets/2023052601.html-c8736988.js" as="script"><link rel="prefetch" href="/assets/guide.html-f4e88b17.js" as="script"><link rel="prefetch" href="/assets/052401.html-b3fc98ff.js" as="script"><link rel="prefetch" href="/assets/api.html-14e1cbbc.js" as="script"><link rel="prefetch" href="/assets/home.html-d1841530.js" as="script"><link rel="prefetch" href="/assets/plugin.html-d3105433.js" as="script"><link rel="prefetch" href="/assets/theme.html-85edca84.js" as="script"><link rel="prefetch" href="/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/assets/index.html-cdac9fc5.js" as="script"><link rel="prefetch" href="/assets/index.html-26b6b05a.js" as="script"><link rel="prefetch" href="/assets/index.html-af423a6a.js" as="script"><link rel="prefetch" href="/assets/index.html-8613465d.js" as="script"><link rel="prefetch" href="/assets/index.html-b95d3f0f.js" as="script"><link rel="prefetch" href="/assets/index.html-c8e6172f.js" as="script"><link rel="prefetch" href="/assets/index.html-12452786.js" as="script"><link rel="prefetch" href="/assets/index.html-8ae96d36.js" as="script"><link rel="prefetch" href="/assets/index.html-dc57b570.js" as="script"><link rel="prefetch" href="/assets/index.html-8283c396.js" as="script"><link rel="prefetch" href="/assets/index.html-9e87beda.js" as="script"><link rel="prefetch" href="/assets/index.html-3b9e2bdd.js" as="script"><link rel="prefetch" href="/assets/2023052601.html-9c55fd19.js" as="script"><link rel="prefetch" href="/assets/guide.html-b475fa9f.js" as="script"><link rel="prefetch" href="/assets/052401.html-52493770.js" as="script"><link rel="prefetch" href="/assets/api.html-15199f71.js" as="script"><link rel="prefetch" href="/assets/home.html-6c617505.js" as="script"><link rel="prefetch" href="/assets/plugin.html-3c259491.js" as="script"><link rel="prefetch" href="/assets/theme.html-0ea72a8e.js" as="script"><link rel="prefetch" href="/assets/404.html-206e1002.js" as="script"><link rel="prefetch" href="/assets/reco-valine-a0c1af1f.js" as="script">
    <link rel="preload" href="/assets/style-6533c42a.css" as="style"><link rel="stylesheet" href="/assets/style-6533c42a.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper series--no show-catalog"><div><header class="navbar-container" style="top:0;"><div class="site-brand nav-item"><img class="logo" src="/logo.png" alt="KnifeR 博客站"><a href="/" class="site-name can-hide">KnifeR 博客站</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/categories/reco/1/" class="link" aria-label="分类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->分类<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/tags/tag1/1/" class="link" aria-label="标签"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->标签<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="精选"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->精选<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="精选"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->精选<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/docs/theme-reco/theme" class="link" aria-label="vuepress-reco"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vuepress-reco<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/blogs/other/guide" class="link" aria-label="vuepress-theme-reco"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vuepress-theme-reco<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></header><!----><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/categories/reco/1/" class="link" aria-label="分类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->分类<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/tags/tag1/1/" class="link" aria-label="标签"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->标签<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="精选"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->精选<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="精选"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->精选<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/docs/theme-reco/theme" class="link" aria-label="vuepress-reco"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vuepress-reco<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/blogs/other/guide" class="link" aria-label="vuepress-theme-reco"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vuepress-theme-reco<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/logo.png" alt="KnifeR 博客站"><a href="/" class="site-name can-hide">KnifeR 博客站</a></div><!--[--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">Java多线程基础</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->KnifeR<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2023/06/26<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->学习笔记<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Java 多线程<!--]--></span></span><!----></div><div class="theme-reco-default-content"><div><p><em>最近整理的一份之前的学习笔记</em></p><h2 id="_1-概念" tabindex="-1"><a class="header-anchor" href="#_1-概念" aria-hidden="true">#</a> 1. 概念</h2><ul><li>线程是进程下一条条独立的执行路径</li><li>在程序运行时，即使没有自己创建线程，后台也会有多个线程（如主线程、gc线程等）</li><li>main()称之为主线程，是入口，用于执行整个程序</li><li>在一个进程中，如果开辟了多个线程，线程的运行由调度器安排调度，调度器是与操作系统紧密相关的，先后顺序是不能人为干预的；线程具有优先级，设置了优先级后，理论上优先级高的线程会被先执行</li><li>对同一份资源操作时，会存在资源抢夺的问题，需要加入并发控制</li><li>线程会带来额外开销（如CPU调度耗费的时间、并发控制的开销等）</li><li>每个线程只会与自己的工作内存交互，内存控制不当会造成数据不一致</li></ul><h2 id="_2-线程类的创建" tabindex="-1"><a class="header-anchor" href="#_2-线程类的创建" aria-hidden="true">#</a> 2. 线程类的创建</h2><p>共有三种创建方式</p><h3 id="_2-1-实现runnable接口" tabindex="-1"><a class="header-anchor" href="#_2-1-实现runnable接口" aria-hidden="true">#</a> 2.1 实现Runnable接口</h3><p>定义Runnable接口的实现类，实现run方法编写执行体。实例化实现类创建对象后，以该对象为构造参数创建Thread对象，并调用Thread对象下的start方法即可开启线程（代理思想）</p><p><strong>推荐使用这种方式：同一个Runnable实现类的对象可以被多个线程（Thread）使用</strong></p><h3 id="_2-2-继承thread类" tabindex="-1"><a class="header-anchor" href="#_2-2-继承thread类" aria-hidden="true">#</a> 2.2 继承Thread类</h3><p>定义Thread类的子类，重写run方法编写执行体。创建线程对象后，调用对象的start方法即可开启线程</p><p>Tip：Thread类实现了Runnable接口</p><p><strong>不推荐使用这种方式：单继承有局限性</strong></p><h3 id="_2-3-实现callable接口" tabindex="-1"><a class="header-anchor" href="#_2-3-实现callable接口" aria-hidden="true">#</a> 2.3 实现Callable接口</h3><ul><li>定义Callable接口的实现类，实现call方法（需要指定泛型为call方法的返回值类型），并创建出对象</li><li>创建执行服务（ExecutorService），常见的方式是“Executors.newFixedThreadPool(n)”（创建线程池）</li><li>提交执行：以Callable实现类的对象为参数调用执行服务（ExecutorService）下的submit方法</li><li>获取结果：ExecutorService的submit方法会返回线程的执行结果（Future对象），而该执行结果包含了Callable的call方法的返回值，使用get方法就可以获取</li><li>关闭执行服务：调用ExecutorService下的shutdownNow方法</li></ul><h2 id="_3-线程的五大状态" tabindex="-1"><a class="header-anchor" href="#_3-线程的五大状态" aria-hidden="true">#</a> 3. 线程的五大状态</h2><p><img src="https://s3.bmp.ovh/imgs/2022/05/17/b1f2f7038b971bfd.jpg" alt="202205170339484"></p><p>五大状态指的是概念上的状态：</p><ul><li>创建状态：线程对象（Thread）一旦被创建，就进入到了该状态</li><li>就绪状态：start方法被调用后，线程立即进入就绪状态（但并不意味着立即就被调度执行）</li><li>运行状态：线程被CPU调度运行时进入该状态，这时我们书写的代码块才会被执行</li><li>阻塞状态：当sleep、wait被调用或同步锁生效时，线程进入阻塞状态，此时代码不会继续往下执行。阻塞状态解除后，线程重新进入就绪状态，等待CPU的调度执行</li><li>死亡状态：线程中断或结束</li></ul><h2 id="_4-线程的观测状态" tabindex="-1"><a class="header-anchor" href="#_4-线程的观测状态" aria-hidden="true">#</a> 4. 线程的观测状态</h2><p>观测状态指的是实际代码中的状态（Thread.State枚举类中有所定义）：</p><table><thead><tr><th style="text-align:center;">名称</th><th style="text-align:center;">描述</th></tr></thead><tbody><tr><td style="text-align:center;">NEW</td><td style="text-align:center;">尚未启动的线程处于此状态</td></tr><tr><td style="text-align:center;">RUNNABLE</td><td style="text-align:center;">在Java虚拟机中执行的线程处于此状态</td></tr><tr><td style="text-align:center;">BLOCKED</td><td style="text-align:center;">被阻塞等待监视器锁定的线程处于此状态</td></tr><tr><td style="text-align:center;">WAITING</td><td style="text-align:center;">正在等待另一个线程执行特定动作的线程处于此状态（无限期等待）</td></tr><tr><td style="text-align:center;">TIMED_WAITING</td><td style="text-align:center;">正在等待另一个线程执行动作达到指定等待时间的线程处于此状态（过期不候）</td></tr><tr><td style="text-align:center;">TREMINATED</td><td style="text-align:center;">已退出的线程处于此状态</td></tr></tbody></table><p>调用线程对象的getState方法拿到当前线程的运行状态</p><h2 id="_5-线程方法" tabindex="-1"><a class="header-anchor" href="#_5-线程方法" aria-hidden="true">#</a> 5. 线程方法</h2><p><img src="https://s3.bmp.ovh/imgs/2022/05/17/63f2b7f25fbcf8c2.png" alt="202205170340431"></p><h2 id="_6-停止线程" tabindex="-1"><a class="header-anchor" href="#_6-停止线程" aria-hidden="true">#</a> 6. 停止线程</h2><p>JDK提供的stop、destroy方法都已经被官方弃用，不推荐使用</p><p>可以定义标志位，线程对外提供stop方法来更改这个标志位，并在run方法中检测这个标志位以判断是否应该继续执行该线程（也就是说，使run方法返回是线程结束的唯一方式）</p><h2 id="_7-线程休眠" tabindex="-1"><a class="header-anchor" href="#_7-线程休眠" aria-hidden="true">#</a> 7. 线程休眠</h2><p>使用sleep方法进行线程休眠：</p><ul><li>可以执行休眠进行的毫秒数</li><li>存在可能抛出的异常InterruptedException</li><li>sleep时间达到后，线程进入就绪状态</li><li>sleep不会释放锁</li></ul><h2 id="_8-线程礼让" tabindex="-1"><a class="header-anchor" href="#_8-线程礼让" aria-hidden="true">#</a> 8. 线程礼让</h2><p>使用yield进行线程礼让：</p><ul><li>当前正在执行的线程暂停，但不阻塞，线程会直接从运行状态转为就绪状态</li><li>进行礼让后，CPU会重新调度执行一条线程，然而有可能重新执行的这条线程就是之前进行礼让的线程，也就是说这个礼让不一定成功</li></ul><h2 id="_9-线程强制执行-插队" tabindex="-1"><a class="header-anchor" href="#_9-线程强制执行-插队" aria-hidden="true">#</a> 9. 线程强制执行（插队）</h2><p>使用join方法合并线程：</p><ul><li>调用join方法的线程执行时，其他线程会一直被阻塞（直到join线程执行完毕）</li><li>就类似插队</li></ul><h2 id="_10-守护线程" tabindex="-1"><a class="header-anchor" href="#_10-守护线程" aria-hidden="true">#</a> 10. 守护线程</h2><p>线程分为<strong>用户线程</strong>和<strong>守护线程</strong>：</p><ul><li>虚拟机必须确保用户线程执行完毕</li><li>虚拟机不用等待守护线程执行完毕（也就是说主线程结束，守护线程也不会结束，当然除非虚拟机关了）</li><li>后台记录操作日志、监控内存、垃圾回收等待等功能都是由守护线程来负责的</li></ul><p>想要线程从用户线程变为守护线程，调用setDaemon方法，设置为true即可</p><h2 id="_11-线程同步" tabindex="-1"><a class="header-anchor" href="#_11-线程同步" aria-hidden="true">#</a> 11. 线程同步</h2><p>由于同一进程的多个线程共享同一块存储空间，会存在访问冲突问题，为了保证数据在方法中被访问时的正确性，在访问时加入<strong>锁机制（synchronized）</strong>，当一个线程对象的排他锁，这时代表它正在独占共享资源，其他线程如果想要使用同一资源则需要等待，直到排他锁被释放：</p><ul><li>一个线程持有锁会导致其他所有需要此资源（锁）的线程挂起</li><li>在多线程竞争下，加锁和释放锁会导致比较多的上下文切换和调度延时，引起性能问题</li><li>优先级倒置问题：优先级低的线程占据着锁，导致优先级高的线程反而需要等待优先级低的线程释放锁</li></ul><h3 id="_11-1-同步方法" tabindex="-1"><a class="header-anchor" href="#_11-1-同步方法" aria-hidden="true">#</a> 11.1 同步方法</h3><p>使用<strong>synchronized</strong>关键字修饰方法即可让方法变为同步方法，每个对象对应一把锁，而所有的同步方法都必须获得其访问的对象的锁才能继续执行，获取不到则线程会一直阻塞等待，一旦获取到，就独占该锁，直到方法返回</p><p>如果synchronized修饰了普通方法，则锁的是this，如果修饰了静态方法，则锁的是Class模板（Clazz）</p><p><strong>普通方法不受锁的任何影响</strong></p><h3 id="_11-2-同步块" tabindex="-1"><a class="header-anchor" href="#_11-2-同步块" aria-hidden="true">#</a> 11.2 同步块</h3><p>语法格式：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">synchronized</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 代码块</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上述代码中的“obj”被称为“<strong>同步监视器</strong>”：</p><ul><li>obj可以是任何对象，但推荐使用共享资源</li><li>其实同步方法和同步监视器的是相同的，同步方法就是将this指定为了同步监视器，即锁定的就是这个对象本身（或是clazz），因此如果我们不想把同步监视器设置为this，就不要使用同步方法，而是使用同步块，自己进行指定</li><li>同步监视器的执行过程（假设有两个线程）： <ol><li>第一个线程访问，锁定同步监视器，执行其中代码</li><li>第二个线程访问，发现同步监视器被锁定，无法访问，阻塞等待</li><li>第一个线程访问完毕，解锁同步监视器</li><li>第二个线程访问，发现同步监视器没有锁，于是锁定同步监视器，执行其中代码</li></ol></li></ul><h3 id="_11-3-cow容器" tabindex="-1"><a class="header-anchor" href="#_11-3-cow容器" aria-hidden="true">#</a> 11.3 COW容器</h3><p>在多线程的场景中，我们原本使用的很多容器都不能再使用了，以数组容器为例，我们常用的<code>ArrayList</code>线程不安全，使用时可以手动使用<code>synchronized</code>强行加锁同步，但长此以往，总归不是个办法</p><p>相比之下，<code>CopyOnWriteArrayList</code>是线程安全的，目前是多线程场景下较为常用的List容器</p><p><em>关于COW容器到这里就浅尝辄止了，如果你希望了解更多，可以看咱后续发布的JUC相关笔记</em></p><h3 id="_11-4-死锁" tabindex="-1"><a class="header-anchor" href="#_11-4-死锁" aria-hidden="true">#</a> 11.4 死锁</h3><p>多个线程各自占有一些共享资源，并且需要使用其他线程占有的资源，这时就导致了两个或者多个线程都在互相等待对方释放资源，此时它们都是阻塞状态，停止执行，谁都动不了，这就是死锁</p><h4 id="_11-4-1-避免方法" tabindex="-1"><a class="header-anchor" href="#_11-4-1-避免方法" aria-hidden="true">#</a> 11.4.1 避免方法</h4><p>死锁产生有四个必要条件：</p><ul><li>互斥条件：一个资源每次只能被一个进程调用</li><li>请求与保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放</li><li>不剥夺条件：进程已获得的资源，在未使用完之前，不能强行剥夺</li><li>循环等待条件：若干进程之间形成一种头尾相接的循环等待资源关系</li></ul><p>针对上述四个条件，选择任意项进行针对，即可避免死锁发生</p><h3 id="_11-5-lock" tabindex="-1"><a class="header-anchor" href="#_11-5-lock" aria-hidden="true">#</a> 11.5 Lock</h3><p>从JDK5.0开始，Java提供了更强大的线程同步机制——通过显式定义同步锁对象（Lock）来实现同步</p><p><code>java.util.concurrent.locks.Lock</code>接口是控制多个线程对共享资源进行访问的工具，提供了对共享资源的独占访问，每次只能有一个线程对Lock对象加锁，而线程开始访问共享资源之前应先获得Lock对象</p><p><code>ReentrantLock</code>类实现了<code>Lock</code>接口，它拥有与<code>synchronized</code>相同的并发性和内存语义，在实现线程安全的控制中，比较常用的是<code>ReentrantLock</code>，它可以显示加锁、释放锁</p><p><strong>使用方式很简单，要操作共享资源时调用加锁方法，操作完成后调用解锁方法即可</strong></p><p><code>Lock</code>与<code>synchronized</code>对比：</p><table><thead><tr><th style="text-align:center;"></th><th style="text-align:center;">synchronized</th><th style="text-align:center;">Lock</th></tr></thead><tbody><tr><td style="text-align:center;"><strong>生效方式</strong></td><td style="text-align:center;">隐式锁，出了作用域自动释放</td><td style="text-align:center;">显示锁，需要手动调用方法开启和关闭</td></tr><tr><td style="text-align:center;"><strong>锁类型</strong></td><td style="text-align:center;">有代码块锁和方法锁</td><td style="text-align:center;">只有代码块锁</td></tr><tr><td style="text-align:center;"><strong>性能</strong></td><td style="text-align:center;">性能没有Lock好</td><td style="text-align:center;">JVM会花费更少的时间调度线程</td></tr><tr><td style="text-align:center;"><strong>扩展性</strong></td><td style="text-align:center;">无</td><td style="text-align:center;">是接口，因此具有不同的实现方式</td></tr></tbody></table><p>此外，如果同时使用这些同步方式，则优先级为：</p><p>Lock &gt; 同步代码块（此时已经进入了方法体，分配了相关资源） &gt; 同步方法（在方法体之外）</p><h2 id="_12-线程协作" tabindex="-1"><a class="header-anchor" href="#_12-线程协作" aria-hidden="true">#</a> 12. 线程协作</h2><h3 id="_12-1-线程通信" tabindex="-1"><a class="header-anchor" href="#_12-1-线程通信" aria-hidden="true">#</a> 12.1 线程通信</h3><p>Java提供了几个方法解决线程之间的通信问题：</p><table><thead><tr><th style="text-align:center;">方法名</th><th style="text-align:center;">作用</th></tr></thead><tbody><tr><td style="text-align:center;">wait()</td><td style="text-align:center;">表示线程一直等待，直到其他线程通知，锁会被释放</td></tr><tr><td style="text-align:center;">wait(long timeout)</td><td style="text-align:center;">指定等待的毫秒数</td></tr><tr><td style="text-align:center;">notify()</td><td style="text-align:center;">唤醒一个调用了wait()处于等待状态的线程</td></tr><tr><td style="text-align:center;">notifyAll()</td><td style="text-align:center;">唤醒同一个对象上所有调用wait()方法的线程，此时优先级高的线程会被优先调度</td></tr></tbody></table><p>以上方法均是Object类的方法，都只能在同步方法或者同步代码块中使用，否则会抛出异常<strong>InlegalMonitorStateException</strong></p><h3 id="_12-2-解决方案-生产者-消费者模式" tabindex="-1"><a class="header-anchor" href="#_12-2-解决方案-生产者-消费者模式" aria-hidden="true">#</a> 12.2 解决方案（生产者/消费者模式）</h3><h4 id="_12-2-1-管程法" tabindex="-1"><a class="header-anchor" href="#_12-2-1-管程法" aria-hidden="true">#</a> 12.2.1 管程法</h4><ul><li>生产者：负责生产数据的模块（可能是方法、对象、线程、进程）</li><li>消费者：负责处理数据的模块（可能是方法、对象、线程、进程）</li><li>缓冲区：消费者不能直接使用生产者的数据，他们之间会有一个缓冲区，生产者将数据放入缓冲区，消费者从缓冲区中取出数据</li></ul><h4 id="_12-2-2-信号灯法" tabindex="-1"><a class="header-anchor" href="#_12-2-2-信号灯法" aria-hidden="true">#</a> 12.2.2 信号灯法</h4><p>总的来说，信号灯法就是设置一个标志位来作为信号来提醒生产者和消费者，双方通过更改这个标志位，达到通信中传递信号提醒的目的</p><p>Tip：信号灯法就是让生产者让消费者围绕标志位做文章，而管程法需要消费者围绕缓冲区容器做文章</p><h2 id="_13-线程池" tabindex="-1"><a class="header-anchor" href="#_13-线程池" aria-hidden="true">#</a> 13. 线程池</h2><p>线程经常创建和销毁，会消耗很大的资源，因此我们通常提前创建好多个线程，将它们放入线程池中，使用时直接获取，使用完后放回池中等待下一次使用，这样可以节省资源</p><p>总结好处：</p><ul><li>提高响应速度（减少了创建新线程的时间）</li><li>降低资源消耗（重复利用线程池中线程，不需要每次都创建）</li><li>可以设置一些线程池的参数，便于线程管理，如： <ul><li>corePoolSize：核心池大小，即池内能最多放多少个线程</li><li>maximumPoolSize：最大线程数</li><li>keepAliveTime：线程没有任务时最多保持多长时间后会终止</li></ul></li></ul><h3 id="_13-1-使用" tabindex="-1"><a class="header-anchor" href="#_13-1-使用" aria-hidden="true">#</a> 13.1 使用</h3><p>JDK5+提供了线程池相关API：<code>ExecutorService</code>（执行服务）和<code>Executors</code>：</p><ul><li><code>ExecutorService</code>：真正的线程池接口，常见子类为<code>ThreadPoolExecutor</code>，常用方法如下： <ul><li>void execute(Runnable command)：执行任务/命令，没有返回值，一般用来执行Runnable</li><li>&lt;T&gt; Future&lt;T&gt; submit(Callable&lt;T&gt; task)：执行任务，有返回值，一般用来执行Callable</li><li>void shutdown()：关闭线程池</li></ul></li><li><code>Executors</code>：工具类，也是线程池的工厂类，用于创建并返回不同类型的线程池</li></ul><p>在上面<a href="###%E5%AE%9E%E7%8E%B0Callable%E6%8E%A5%E5%8F%A3">线程类的创建的实现Callable接口方式</a>中有涉及，想要更多的细节，可以去翻阅手册</p><h2 id="_14-threadlocal" tabindex="-1"><a class="header-anchor" href="#_14-threadlocal" aria-hidden="true">#</a> 14. ThreadLocal</h2><h3 id="_14-1-简单介绍" tabindex="-1"><a class="header-anchor" href="#_14-1-简单介绍" aria-hidden="true">#</a> 14.1 简单介绍</h3><p><code>ThreadLocal</code>是JDK提供的用于存储线程专属变量的工具，它的功能和API都非常简单，就是实现了线程之间的变量的隔离，这里只介绍它的实现原理</p><p>实际上，每个线程都有自己的<code>ThreadLocalMap</code>，使用<code>ThreadLocal</code>时，JDK会首先根据当前线程（<code>Thread</code>）从一个Map中获取到当前线程所属的<code>ThreadLocalMap</code>，然后再通过我们所使用的<code>ThreadLocal</code>从当前线程的<code>ThreadLocalMap</code>中获取到所需的线程专属对象</p><p>说白了，原理就是Map的嵌套，最外层的Map由<code>Thread</code>为key，<code>ThreadLocalMap</code>为值，而里面的一层<code>ThreadLocalMap</code>由<code>ThreadLocal</code>为key，值就是我们所存储的对象</p><h3 id="_14-2-内存泄漏问题" tabindex="-1"><a class="header-anchor" href="#_14-2-内存泄漏问题" aria-hidden="true">#</a> 14.2 内存泄漏问题</h3><p>我们最关心的实际上是使用<code>ThreadLocal</code>不当导致的内存泄露问题，而<code>ThreadLocal</code>对其内部容器的清理以尽量避免内存泄露的做法也是其精髓所在</p><p>那么什么时候容易出现所谓的内存泄露问题呢？<strong>使用线程池的时候</strong></p><p>因为将线程池化后，我们通常不会再池子外部再创建新线程去使用了，只要线程池没有关闭，里面的核心线程就一直存在，而我们又可能在线程中不停地新建<code>ThreadLocal</code>来存储对象，最后又没有及时清理，这就会导致内存的使用量不断攀升，最终可能导致OOM问题</p><p>实际上JDK的开发者也考虑到了这一点，因此他们将<code>ThreadLocalMap</code>的键位，也就是<code>ThreadLocal</code>，按照弱引用来存储（<code>WeakReference&lt;ThreadLocal&lt;?&gt;&gt;</code>），尽可能使得它被GC回收</p><p>因此JDK的相关逻辑中经常会有针对<code>ThreadLocalMap</code>的key的null判断，如果发现key为null，说明GC时已经将这个键作为弱引用回收了，JDK如果检测到这一点，就会将这个空key对应的值也进行置空（null），以促进对值对象的垃圾回收</p><p>JDK通过自动检测回收<code>ThreadLocal</code>的机制无法完全避免内存泄漏的发生，因此作为JDK的使用者，我们如果不再需要使用某个<code>ThreadLocal</code>对象了，也一定要主动调用其<code>remove</code>方法，避免内存泄露</p><h3 id="_14-3-inheritablethreadlocal" tabindex="-1"><a class="header-anchor" href="#_14-3-inheritablethreadlocal" aria-hidden="true">#</a> 14.3 InheritableThreadLocal</h3><p>有时我们希望当前线程的<code>ThreadLocal</code>存储的值，在当前线程创建的子线程中也能够被获取到，JDK为此提供了<code>InheritableThreadLocal</code>，使用它可以就实现这个目的</p><p>使用这个类时要注意一点：<strong>父线程在实例化子线程对象（<code>Thread</code>）之前，必须先设置<code>InheritableThreadLocal</code>的值，如果先创建子线程，后设置值，则这个值子线程是获取不到的</strong></p><p>原理很简单，就是子线程对象被创建时，拷贝了父线程的继承版TL对象，从而实现的值共享，但是这种拷贝只在子线程的构造器中进行了一次，所以子线程实例化之后，父线程就无法与其继续共享新值了</p><h3 id="_14-4-transmittablethreadlocal" tabindex="-1"><a class="header-anchor" href="#_14-4-transmittablethreadlocal" aria-hidden="true">#</a> 14.4 TransmittableThreadLocal</h3><p>假设我们手头已经有子线程，想让父线程把值共享到现有的子线程中，由于<code>InheritableThreadLocal</code>的局限性，这是无法实现的，原生JDK中也没有其他的解决方案，但是这种需求又是极常见的——因为我们一般都会使用池化技术，线程池初始化的时候已经把线程都创建好了，我们又没办法控制上述过程，我们所需求的是<strong>线程池任务提交时，将此时的父线程的<code>ThreadLocal</code>值共享给异步执行该任务的子线程</strong>，这种场景下父子线程的值共享问题非常让人困扰</p><p><code>TransmittableThreadLocal</code>是阿里开源的工具，就帮助我们实现了上述目标</p><p><a href="https://github.com/alibaba/transmittable-thread-local/" target="_blank" rel="noopener noreferrer">官方Github<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><code>TransmittableThreadLocal</code>可以被当作<code>InheritableThreadLocal</code>进行常规使用，这是因为它继承自后者</p><p>最常见的使用场景示例如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">TransmittableThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransmittableThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// =====================================================</span>

<span class="token comment">// 在父线程中设置</span>
context<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;value-set-in-parent&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Runnable</span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RunnableTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 额外的处理，生成修饰了的对象ttlRunnable</span>
<span class="token class-name">Runnable</span> ttlRunnable <span class="token operator">=</span> <span class="token class-name">TtlRunnable</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
executorService<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>ttlRunnable<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// =====================================================</span>

<span class="token comment">// Task中可以读取，值是&quot;value-set-in-parent&quot;</span>
<span class="token class-name">String</span> value <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不难看出，核心就是通过<code>TtlRunnable.get(Runnable)</code>来修饰<code>Runnable</code>对象，将修饰后的对象提交到线程池，就可以实现我们想要的“随时”的父子线程值共享的效果</p><p><em>针对<code>Callable</code>，同样可以使用<code>TtlCallable</code>进行修饰，用法相同</em></p><p>延伸阅读：https://zhuanlan.zhihu.com/p/113388946</p></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><!----></footer><!----><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_1-概念" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1. 概念"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1. 概念<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_2-线程类的创建" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2. 线程类的创建"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2. 线程类的创建<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_2-1-实现runnable接口" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.1 实现Runnable接口"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1 实现Runnable接口<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_2-2-继承thread类" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.2 继承Thread类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.2 继承Thread类<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_2-3-实现callable接口" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.3 实现Callable接口"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.3 实现Callable接口<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_3-线程的五大状态" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3. 线程的五大状态"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3. 线程的五大状态<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_4-线程的观测状态" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4. 线程的观测状态"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4. 线程的观测状态<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_5-线程方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5. 线程方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5. 线程方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_6-停止线程" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6. 停止线程"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6. 停止线程<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_7-线程休眠" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="7. 线程休眠"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->7. 线程休眠<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_8-线程礼让" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="8. 线程礼让"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->8. 线程礼让<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_9-线程强制执行-插队" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="9. 线程强制执行（插队）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->9. 线程强制执行（插队）<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_10-守护线程" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="10. 守护线程"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->10. 守护线程<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_11-线程同步" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="11. 线程同步"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->11. 线程同步<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_11-1-同步方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="11.1 同步方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->11.1 同步方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_11-2-同步块" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="11.2 同步块"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->11.2 同步块<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_11-3-cow容器" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="11.3 COW容器"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->11.3 COW容器<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_11-4-死锁" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="11.4 死锁"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->11.4 死锁<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_11-5-lock" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="11.5 Lock"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->11.5 Lock<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_12-线程协作" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="12. 线程协作"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->12. 线程协作<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_12-1-线程通信" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="12.1 线程通信"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->12.1 线程通信<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_12-2-解决方案-生产者-消费者模式" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="12.2 解决方案（生产者/消费者模式）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->12.2 解决方案（生产者/消费者模式）<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_13-线程池" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="13. 线程池"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->13. 线程池<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_13-1-使用" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="13.1 使用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->13.1 使用<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/note/062601.html#_14-threadlocal" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="14. ThreadLocal"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->14. ThreadLocal<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_14-1-简单介绍" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="14.1 简单介绍"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->14.1 简单介绍<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_14-2-内存泄漏问题" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="14.2 内存泄漏问题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->14.2 内存泄漏问题<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_14-3-inheritablethreadlocal" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="14.3 InheritableThreadLocal"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->14.3 InheritableThreadLocal<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/note/062601.html#_14-4-transmittablethreadlocal" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="14.4 TransmittableThreadLocal"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->14.4 TransmittableThreadLocal<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-46763c8b.js" defer></script>
  </body>
</html>
